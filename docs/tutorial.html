
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tutorial &#8212; Compass 2021 documentation</title>
    
  <link rel="stylesheet" href="static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="static/basic.css" type="text/css" />
    
  <link rel="preload" as="script" href="static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="./" src="static/documentation_options.js"></script>
    <script src="static/jquery.js"></script>
    <script src="static/underscore.js"></script>
    <script src="static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Extra Features" href="extra.html" />
    <link rel="prev" title="Installing Compass" href="install.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="index.html">
    
      <p class="title">Compass</p>
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="install.html">Installing Compass</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="">Tutorial</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="extra.html">Extra Features</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
          
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#running-compass-simple" class="nav-link">Running Compass (Simple)</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#running-compass-advanced-settings" class="nav-link">Running Compass (Advanced settings)</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#postprocessing" class="nav-link">Postprocessing</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#outputs" class="nav-link">Outputs</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#running-compass-simple" id="id1">Running Compass (Simple)</a></p></li>
<li><p><a class="reference internal" href="#running-compass-advanced-settings" id="id2">Running Compass (Advanced settings)</a></p></li>
<li><p><a class="reference internal" href="#postprocessing" id="id3">Postprocessing</a></p></li>
<li><p><a class="reference internal" href="#outputs" id="id4">Outputs</a></p></li>
</ul>
</div>
<p>Broadly speaking, Compass takes in a gene expression matrix scaled by
transcripts per million, and outputs a penalty reaction matrix, whereby
higher scores correspond to a reaction being <strong>less</strong> likely.</p>
<div class="section" id="running-compass-simple">
<h2><a class="toc-backref" href="#id1">Running Compass (Simple)</a><a class="headerlink" href="#running-compass-simple" title="Permalink to this headline">¶</a></h2>
<p>Input file <code class="docutils literal notranslate"><span class="pre">expression.txt</span></code> should be a tab-delimited text file
containing gene expression estimates (TPM) with one row per gene, one
column per sample. Must contain both row and column labels,
corresponding to genes and sample IDs/names respectively.</p>
<p>You can find an example input in the Compass install directory under /Compass/Resources/Test Data. You can find the Compass install directory with</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>which compass
</pre></div>
</div>
<p>Or on Windows</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>where compass
</pre></div>
</div>
<p>Then you can run compass on the data with the following command, which will limit the number of processes to 10:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>compass --data expression.txt --num-processes <span class="m">10</span>
</pre></div>
</div>
<p>Below is an example of the formatting for gene expression (We only show
a small portion of the matrix):</p>
<img alt="images/input_ex.png" src="images/input_ex.png" />
<p>For the first run of compass on a given model and media there will be overhead building up Compass’s cache.
Depending on the number of threads available this can be reasonbly fast, taking 5-10 minuts on 20 threads.
You can manually build up the cache before running compass with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>compass --precache
</pre></div>
</div>
<p><em>Note: For every individual sample, Compass takes roughly 30 minutes
to calculate the reaction penalties (varying by machine). This can
be expedited by running more than one process at once. In addition,
Compass saves the results of all samples that it has already processed in the _tmp directory.
Therefore, Compass can also be stopped and restarted after it is done
processing a subset of samples so long as the _tmp directory is still there.</em></p>
</div>
<div class="section" id="running-compass-advanced-settings">
<h2><a class="toc-backref" href="#id2">Running Compass (Advanced settings)</a><a class="headerlink" href="#running-compass-advanced-settings" title="Permalink to this headline">¶</a></h2>
<p>Compass also allows users to customize a variaty of settings seen below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage: compass <span class="o">[</span>-h<span class="o">]</span> --data FILE <span class="o">[</span>--model MODEL<span class="o">]</span> <span class="o">[</span>--species SPECIES<span class="o">]</span>
               <span class="o">[</span>--media MEDIA<span class="o">]</span> <span class="o">[</span>--output-dir DIR<span class="o">]</span> <span class="o">[</span>--temp-dir DIR<span class="o">]</span>
               <span class="o">[</span>--torque-queue QUEUE<span class="o">]</span> <span class="o">[</span>--num-processes N<span class="o">]</span> <span class="o">[</span>--lambda F<span class="o">]</span>
               <span class="o">[</span>--num-threads N<span class="o">]</span> <span class="o">[</span>--and-function FXN<span class="o">]</span> <span class="o">[</span>--num-neighbors N<span class="o">]</span>
               <span class="o">[</span>--symmetric-kernel<span class="o">]</span> <span class="o">[</span>--input-weights FILE<span class="o">]</span>
               <span class="o">[</span>--penalty-diffusion MODE<span class="o">]</span> <span class="o">[</span>--no-reactions<span class="o">]</span> <span class="o">[</span>--no-metabolites<span class="o">]</span>
</pre></div>
</div>
<p>See our instructions
<a class="reference internal" href="Compass-Advanced-Usage-Tutorial.html"><span class="doc">here</span></a>
for an in depth tutorial on using Compass’s advanced settings</p>
</div>
<div class="section" id="postprocessing">
<h2><a class="toc-backref" href="#id3">Postprocessing</a><a class="headerlink" href="#postprocessing" title="Permalink to this headline">¶</a></h2>
<p>Once Compass has finished running, it is important to apply
postprocessing to the data in order to convert reaction penalties (where
high values correspond to low likelihood reactions) to reaction scores
(where high values correspond to likely reactions).</p>
<p>Our <a class="reference external" href="https://github.com/YosefLab/compassR">compassR package</a>
appropriately postprocesses the data and provides an easy, expressive
framework for conducting subsequent analyses. See <a class="reference internal" href="Compass-Postprocessing-Tutorial.html"><span class="doc">compass postprocessing tutorial</span></a> for more on how to use it.</p>
</div>
<div class="section" id="outputs">
<h2><a class="toc-backref" href="#id4">Outputs</a><a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h2>
<p>When Compass has completed, the outputs for all samples are stored in a
tab delimited file <code class="docutils literal notranslate"><span class="pre">reactions.tsv</span></code> in the specified output directory
(<code class="docutils literal notranslate"><span class="pre">.</span></code> directory when running Compass by default).</p>
<p>Below is an example of the output matrix:</p>
<img alt="images/output_ex.png" src="images/output_ex.png" />
<p><em>Note: While compass is running, it will store partial results for
each sample in the _tmp directory/ (or the directory following --temp-dir)</em></p>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="install.html" title="previous page">Installing Compass</a>
    <a class='right-next' id="next-link" href="extra.html" title="next page">Extra Features</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="static/js/index.3da636dd464baa7582d2.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2021, Yosef Lab.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>